<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUBG POLSKA CUP 2025 - SQUAD FPP</title>

    <link rel="icon" href="https://i.imgur.com/HcTRskR.png" type="image/png">
    <link rel="shortcut icon" href="https://i.imgur.com/HcTRskR.png" type="image/png">

    <meta http-equiv="refresh" content="600">
    <style>
        /* ------- Globalne Style ------- */
        html {
            scroll-behavior: smooth; /* Włącza płynne przewijanie */
        }
        body {
            /* Tło na jednolity kolor */
            background-color: #2a2a2a;

            color: #e0e0e0; /* Jasnoszary tekst */
            font-family: 'Arial', 'Helvetica', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        /* ------- Główny Kontener ------- */
        .container {
            width: 90%;
            max-width: 900px;
            margin: 20px auto;
            background-color: rgba(30, 30, 30, 0.9); /* Ciemnoszare tło kontenera */
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
            overflow: hidden; /* Aby zaokrąglone rogi działały na sekcjach */
        }

        /* ------- Nagłówek ------- */
        header {
            background-color: #2a2a2a;
            padding: 10px 20px;
            text-align: center;
            border-bottom: 4px solid #ffc107; /* Żółty akcent PUBG */
        }

        /* Styl dla baneru w nagłówku */
        header .banner-img {
            max-width: 110%; /* Lekkie powiększenie */
            height: auto; /* Zachowanie proporcji */
            margin: 10px auto; /* Wyśrodkowanie w poziomie */
            display: block; /* Upewnia się, że obraz jest wyśrodkowany poprawnie */
        }


        /* ------- Pasek Nawigacji (Zakładki) ------- */
        .navbar {
            background-color: rgba(42, 42, 42, 0.95); /* Ciemny z przezroczystością */
            padding: 10px 0;
            text-align: center;
            border-bottom: 2px solid #333;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .navbar a {
            color: #e0e0e0;
            text-decoration: none;
            font-size: 1em;
            font-weight: bold;
            margin: 0 10px;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
        }
        .navbar a:hover, .navbar a.active {
            background-color: #ffc107;
            color: #121212;
        }

        /* ------- Główna Treść ------- */
        main {
            padding: 30px;
        }

        .content-section {
            margin-bottom: 40px;
            padding-top: 30px;
        }

        /* ------- Sekcja Zapisów (Hero) ------- */
        .zapisy {
            text-align: center;
            padding: 40px 20px;
            background-color: rgba(42, 42, 42, 0.9); /* Ciemny z przezroczystością */
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .zapisy h3 {
            font-size: 2em;
            color: #ffffff;
            margin-top: 0;
        }
        .zapisy p {
            font-size: 1.1em;
            color: #b0b0b0;
        }

        /* ------- Przycisk Zapisów (Call to Action) ------- */
        .cta-button {
            display: inline-block;
            background-color: #ffc107;
            color: #121212;
            padding: 15px 35px;
            font-size: 1.3em;
            font-weight: bold;
            text-decoration: none;
            text-transform: uppercase;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .cta-button:hover {
            background-color: #ffffff;
            color: #121212;
            transform: scale(1.05);
        }

        /* ------- Sekcje Informacyjne (Wspólny styl) ------- */
        .info-section h3 {
            color: #ffc107;
            border-bottom: 2px solid #444;
            padding-bottom: 10px;
            font-size: 1.8em;
            margin-top: 0;
        }

        /* ------- Lista Informacji (np. zasady, daty) ------- */
        .info-list {
            list-style: none;
            padding-left: 0;
        }
        .info-list li {
            background-color: rgba(42, 42, 42, 0.9); /* Ciemny z przezroczystością */
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 5px;
            border-left: 5px solid #ffc107;
        }
        .info-list li strong {
            color: #ffffff;
            display: inline-block;
            min-width: 120px;
        }
        /* Styl dla linku w liście */
        .info-list li a {
            color: #ffc107; /* Żółty kolor linku */
            font-weight: bold;
            text-decoration: none;
        }
        .info-list li a:hover {
            text-decoration: underline;
        }


        /* ============================================= */
        /* CSS - SIATKA DRUŻYN (TEAM GRID) - ZMIANY      */
        /* ============================================= */
        /* Kontener siatki */
        .team-grid {
            display: flex;
            flex-wrap: wrap; /* Pozwala na zawijanie wierszy */
            justify-content: space-around; /* Rozkłada karty z odstępami */
            padding: 0;
            list-style: none;
            margin: 0 -10px; /* Kompensuje marginesy kart */
        }

        /* Karta pojedynczej drużyny */
        .team-card {
            background-color: rgba(42, 42, 42, 0.9);
            margin: 0 10px 20px 10px; /* Marginesy góra/dół i boki */
            padding: 15px 20px;
            border-radius: 5px;
            border-left: 3px solid #ffc107;
            box-sizing: border-box; /* Kluczowe dla flexboxa! */

            /* 3 karty w rzędzie (ok. 33.3%) */
            flex-basis: 30%; /* Zostawia trochę miejsca na marginesy */
            min-width: 250px; /* Minimalna szerokość, zanim zacznie się łamać */
        }

        /* Nagłówek karty (Numer + Nazwa) */
        .team-card-header {
            display: flex;
            align-items: baseline; /* Wyrównuje numer i tekst */
            margin-bottom: 5px; /* Zmniejszony margines, gdy lista jest zwinięta */
            border-bottom: 1px solid #444; /* Linia oddzielająca */
            padding-bottom: 5px;

            /* ZMIANA: Dodano style dla klikalności */
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .team-card-header:hover {
            background-color: rgba(60, 60, 60, 0.9); /* Efekt najechania */
        }

        /* Numer drużyny */
        .team-number {
            font-size: 1.25em;
            font-weight: bold;
            color: #ffffff;
        }

        /* Nazwa drużyny */
        .team-name {
            font-size: 1.25em;
            color: #ffc107;
            font-weight: bold;
            margin-left: 8px; /* Odstęp od numeru */
        }

        /* Pod-lista na graczy (pod nazwą drużyny) */
        .player-sublist {
            list-style: disc; /* Kropki dla graczy */
            margin: 0; /* ZMIANA: Domyślnie 0 marginesu */
            padding-left: 25px; /* Wcięcie dla listy graczy */
            font-size: 0.9em;
            color: #ccc;

            /* ZMIANA: Domyślnie ukryte z animacją */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        /* ZMIANA: Klasa dodawana przez JS do rozwinięcia listy */
        .player-sublist.expanded {
            max-height: 200px; /* Wystarczająco wysoko, aby zmieścić 5 graczy */
            margin: 10px 0 0 0; /* Przywróć margines górny po rozwinięciu */
        }

        /* Resetowanie stylów dla <li> wewnątrz pod-listy */
        .player-sublist li {
            background: none;
            border: none;
            padding: 2px 0;
            margin: 0;
            list-style-position: outside; /* Kropki na zewnątrz */
        }

        /* Wyróżnienie kapitana */
        .captain {
            font-weight: bold;
            color: #ffffff; /* Jaśniejszy kolor dla kapitana */
        }

        /* Styl dla rezerwowego */
        .sub-player {
            font-style: italic;
            opacity: 0.8;
            color: #aaa;
        }

        /* Linki w liście graczy */
        .player-sublist a {
            color: #ffffff;
            text-decoration: none;
            border-bottom: 1px dotted #ffc107;
            transition: color 0.2s, border-bottom 0.2s;
        }
        .player-sublist a:hover {
            color: #ffc107;
            text-decoration: none;
            border-bottom: 1px solid #ffc107;
        }
        /* ============================================= */

        /* ============================================= */
        /* SEKCJE SPONSORÓW (Obrazy)      */
        /* ============================================= */
        .sponsor-image-section {
            padding-top: 10px; /* Mniejszy padding top niż inne sekcje */
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center; /* Wyśrodkowanie obrazka */
        }
        .sponsor-image-section img {
            max-width: 100%; /* Obrazek responsywny */
            height: auto; /* Zachowanie proporcji */
            border-radius: 8px; /* Lekko zaokrąglone rogi */
            box-shadow: 0 4px 10px rgba(0,0,0,0.5); /* Cień pasujący do reszty */
        }
        /* ============================================= */


        /* ------- Sekcja Tabela Wyników ------- */
        .results-table-container {
            overflow-x: auto;
        }
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 1.1em;
            box-shadow: 0 0 10px rgba(0,0,0,0.4);
            min-width: 600px;
        }
        .results-table th, .results-table td {
            border: 1px solid #444;
            padding: 12px 15px;
            text-align: left;
        }
        .results-table th {
            background-color: #ffc107;
            color: #121212;
            text-align: center;
            font-weight: bold;
        }
        .results-table tr {
            background-color: rgba(42, 42, 42, 0.9);
        }
        .results-table tr:nth-of-type(even) {
            background-color: rgba(51, 51, 51, 0.9);
        }
        .results-table tr:nth-of-type(1) td:first-child,
        .results-table tr:nth-of-type(2) td:first-child,
        .results-table tr:nth-of-type(3) td:first-child {
            font-weight: bold;
            color: #ffc107;
        }
        .results-table td:nth-child(1) {
            text-align: center;
            width: 10%;
        }

        /* ------- Zakładki Wyników ------- */
        .tabs-container {
            width: 100%;
            margin-top: 20px;
        }
        .tabs-nav {
            display: flex;
            flex-wrap: wrap;
            background-color: rgba(42, 42, 42, 0.95);
            border-radius: 8px 8px 0 0;
            overflow: hidden;
        }
        .tab-link {
            padding: 12px 15px;
            font-size: 0.9em;
            font-weight: bold;
            color: #ccc;
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            flex-grow: 1;
            text-align: center;
            border-bottom: 3px solid transparent;
        }
        .tab-link:hover {
            background-color: #333;
            color: #fff;
        }
        .tab-link.active {
            background-color: rgba(30, 30, 30, 0.9);
            color: #ffc107;
            border-bottom: 3px solid #ffc107;
        }
        .tab-content {
            display: none;
            background-color: rgba(30, 30, 30, 0.9);
            padding: 20px;
            border: 1px solid #444;
            border-top: none;
            border-radius: 0 0 8px 8px;
        }
        .tab-content.active {
            display: block;
        }
        .tab-content h4 {
            color: #ffffff;
            font-size: 1.4em;
            margin-top: 0;
            text-align: center;
        }

        /* ------- Sekcja Regulamin ------- */
        .rules-container {
            background-color: rgba(42, 42, 42, 0.9);
            border: 1px solid #444;
            border-radius: 8px;
            padding: 10px 25px;
            max-height: 500px;
            overflow-y: auto;
            font-family: 'Courier New', Courier, monospace;
            color: #ccc;
            line-height: 1.5;
        }
        .rules-container pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            margin: 0;
        }

        /* ------- Stopka ------- */
        footer {
            text-align: center;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            color: #777;
            margin-top: 30px;
            border-top: 2px solid #333;
        }

        /* Responsywność */
        @media (max-width: 768px) {
            .tab-link {
                flex-basis: 33.3%;
                font-size: 0.8em;
            }
            /* 2 karty w rzędzie */
            .team-card {
                flex-basis: 45%;
                min-width: 200px;
            }
        }
        @media (max-width: 600px) {
            .navbar {
                padding: 5px 0;
            }
            .navbar a {
                display: block;
                margin: 5px 0;
                font-size: 1.1em;
            }
            .navbar {
                position: static;
            }
            .content-section {
                 padding-top: 10px;
            }
            .tab-link {
                flex-basis: 100%;
                font-size: 1em;
            }
            /* 1 karta w rzędzie */
            .team-card {
                flex-basis: 100%;
            }
        }

    </style>
</head>
<body>

    <div class="container">

        <header>
            <img src="https://i.imgur.com/VhDs7mJ.png" alt="PUBG POLSKA CUP 2025" class="banner-img">
        </header>

        <nav class="navbar">
            <a href="#zapisy">Zapisy</a>
            <a href="#szczegoly">Szczegóły</a>
            <a href="#teamy">Zapisane Teamy</a>
            <a href="#wyniki">Wyniki</a>
            <a href="#regulamin">Regulamin</a>
        </nav>

        <main>
            <section id="zapisy" class="zapisy content-section">

                <h3>Zapisy na turniej SQUAD FPP</h3>
                <p>Wypełnij formularz zgłoszeniowy, klikając przycisk poniżej.</p>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSeaYLKta8D83Xnfanm4tXVUtqX0273o7P1MJEowvVPqI6Crdg/viewform?usp=publish-editor" target="_blank" class="cta-button">
                    ZAPISZ DRUŻYNĘ!
                </a>
                <p style="margin-top: 20px; font-size: 0.9em;">Liczba miejsc ograniczona. Decyduje kolejność zgłoszeń.</p>
            </section>

            <section class="content-section sponsor-image-section">
                <img src="https://i.imgur.com/YJ7FL9X.jpeg" alt="Sponsor Turnieju 1">
            </section>


            <section id="szczegoly" class="info-section content-section">
                <h3>Szczegóły Turnieju</h3>
                <ul class="info-list">
                    <li><strong>Data:</strong> 29 Listopada 2025 (Sobota), start 18:00</li>
                    <li><strong>Format:</strong> SQUAD FPP (drużyny 4-osobowe)</li>
                    <li><strong>Serwer:</strong> EU</li>
                    <li><strong>Mapy:</strong> 2× Miramar, Taego, Rondo oraz 2× Erangel</li>
                    <li><strong>Pula nagród:</strong> Z dobrowolnych wpisowych (50%/30%/20%)</li>
                    <li><strong>Wpisowe:</strong> Dobrowolne</li>
                    <li><strong>Transmisja:</strong> <a href="https://twitch.tv/akerman88" target="_blank">twitch.tv/akerman88</a></li>
                    <li><strong>Discord:</strong> <a href="https://discadia.com/pubgpolska" target="_blank">Dołącz do serwera (Kliknij!)</a></li>
                </ul>
            </section>

            <section id="teamy" class="info-section content-section">
                <h3>Zapisane Teamy</h3>
                <p>Poniżej znajduje się automatycznie aktualizowana lista drużyn. Dane pobierane są na żywo z arkusza zapisów. Kliknij na drużynę, aby zobaczyć skład.</p>

                <div id="team-list-dynamic" class="team-grid">
                    </div>
            </section>

            <section id="wyniki" class="info-section content-section">
                <h3>Wyniki Końcowe</h3>
                <p>Wybierz zakładkę, aby zobaczyć wyniki z poszczególnych gier lub klasyfikację generalną.</p>

                <div class="tabs-container">
                    <div class="tabs-nav">
                        <button class="tab-link active" data-tab="generalna">Klasyfikacja Generalna</button>
                        <button class="tab-link" data-tab="gra1">Gra 1</button>
                        <button class="tab-link" data-tab="gra2">Gra 2</button>
                        <button class="tab-link" data-tab="gra3">Gra 3</button>
                        <button class="tab-link" data-tab="gra4">Gra 4</button>
                        <button class="tab-link" data-tab="gra5">Gra 5</button>
                        <button class="tab-link" data-tab="gra6">Gra 6</button>
                    </div>

                    <div id="tab-generalna" class="tab-content active">
                        <h4>Klasyfikacja Generalna (Suma 6 gier)</h4>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Miejsce</th>
                                        <th>Nazwa Drużyny</th>
                                        <th>Punkty (Rank)</th>
                                        <th>Zabójstwa (Kills)</th>
                                        <th>Suma Punktów</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="tab-gra1" class="tab-content">
                        <h4>Wyniki - Gra 1</h4>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Miejsce</th>
                                        <th>Nazwa Drużyny</th>
                                        <th>Punkty (Rank)</th>
                                        <th>Zabójstwa (Kills)</th>
                                        <th>Suma Punktów</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="tab-gra2" class="tab-content">
                        <h4>Wyniki - Gra 2</h4>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Miejsce</th>
                                        <th>Nazwa Drużyny</th>
                                        <th>Punkty (Rank)</th>
                                        <th>Zabójstwa (Kills)</th>
                                        <th>Suma Punktów</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="tab-gra3" class="tab-content">
                        <h4>Wyniki - Gra 3</h4>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Miejsce</th>
                                        <th>Nazwa Drużyny</th>
                                        <th>Punkty (Rank)</th>
                                        <th>Zabójstwa (Kills)</th>
                                        <th>Suma Punktów</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="tab-gra4" class="tab-content">
                        <h4>Wyniki - Gra 4</h4>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Miejsce</th>
                                        <th>Nazwa Drużyny</th>
                                        <th>Punkty (Rank)</th>
                                        <th>Zabójstwa (Kills)</th>
                                        <th>Suma Punktów</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="tab-gra5" class="tab-content">
                        <h4>Wyniki - Gra 5</h4>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Miejsce</th>
                                        <th>Nazwa Drużyny</th>
                                        <th>Punkty (Rank)</th>
                                        <th>Zabójstwa (Kills)</th>
                                        <th>Suma Punktów</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                    <div id="tab-gra6" class="tab-content">
                        <h4>Wyniki - Gra 6</h4>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr>
                                        <th>Miejsce</th>
                                        <th>Nazwa Drużyny</th>
                                        <th>Punkty (Rank)</th>
                                        <th>Zabójstwa (Kills)</th>
                                        <th>Suma Punktów</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                </div>
            </section>

            <section id="regulamin" class="info-section content-section">
                <h3>Regulamin Turnieju</h3>
                <div class="rules-container">
<pre>
Regulamin Turnieju  PUBG POLSKA CUP 2025   (29.11)

I. Informacje Ogólne
Nazwa Turnieju: PUBG POLSKA CUP 2025
Organizator: PUBG POLSKA
Data Turnieju: godzina 18.00 - 29 listopad 2025 r. (Sobota)
Platforma: PC (Steam)
Format: SQUAD (4-osobowe drużyny), tryb FPP (First Person Perspective)
Oficjalna Transmisja: Turniej będzie transmitowany na żywo na kanale twitch.tv/akerman88
Komunikacja: Oficjalnym kanałem komunikacji z administracją i miejscem ogłoszeń jest dedykowany serwer Discord. Podczas trwania turnieju, obecność na serwerze oraz korzystanie z dedykowanych kanałów głosowych drużyn jest obowiązkowe.

II. Zapisy i Wpisowe
Zapisy odbywają się poprzez oficjalny formularz udostępniony przez Organizatora.
Udział w turnieju jest darmowy.
Organizatorzy zbierają dobrowolne wpisowe od chętnych drużyn i graczy w celu ufundowania puli nagród.
Dane do wpłaty zostaną udostępnione kapitanom drużyn po pomyślnej rejestracji.
Wniesienie opłaty nie jest wymagane do wzięcia udziału w grach, jednak pula nagród składa się w 100% z zebranych środków.
Gracze posiadający aktywną blokadę (bana) na serwerze Discord PUBG POLSKA mają zakaz udziału w turnieju.

III. Pula Nagród
Całkowita pula nagród zależy od sumy zebranych dobrowolnych wpisowych.
100% zebranej kwoty zostanie rozdzielone pomiędzy trzy najlepsze drużyny turnieju.
Podział puli nagród:
1. Miejsce: 50% puli
2. Miejsce: 30% puli
3. Miejsce: 20% puli
Nagrody zostaną wypłacone kapitanom drużyn (lub wskazanemu reprezentantowi) w terminie do 7 dni roboczych po zakończeniu turnieju.

IV. Format Rozgrywek i Punktacja
Turniej składa się z 6 (sześciu) gier rozgrywanych w trybie FPP na serwerach niestandardowych.
Mapy: 2×Miramar, Rondo, Taego, 2×Erangel.
Obowiązuje standardowa punktacja e-sportowa S.U.P.E.R. (Standard and Universal PUBG Esports Ruleset).
Punkty za zabójstwa: 1 punkt za każde zabójstwo.
Punkty za miejsce:
1. miejsce: 10 punktów
2. miejsce: 6 punktów
3. miejsce: 5 punktów
4. miejsce: 4 punkty
5. miejsce: 3 punkty
6. miejsce: 2 punkty
7-8. miejsce: 1 punkt
9-16. miejsce: 0 punktów
Ostateczna klasyfikacja jest tworzona na podstawie sumy punktów (za miejsce + za zabójstwa) ze wszystkich 6 gier.
Zasady rozstrzygania remisów (Tie-break): W przypadku remisu punktowego o wyższym miejscu decyduje:
a) Łączna liczba zabójstw (Kills) we wszystkich meczach.
b) Najwyższa liczba punktów zdobyta w pojedynczej grze.
c) Najwyższe miejsce zajęte w ostatnim meczu turnieju.

V. Zasady Uczciwej Gry (Fair-Play)
Zakaz oszukiwania: Używanie jakichkolwiek programów wspomagających (cheaty), skryptów (w tym makr), modyfikacji plików gry jest surowo zabronione i skutkuje natychmiastową dyskwalifikacją całej drużyny oraz permanentnym banem na przyszłe wydarzenia organizowane przez PUBG POLSKA.
Zakaz "Teaming'u": Jakakolwiek forma współpracy lub "sojuszu" między dwiema lub więcej drużynami w trakcie meczu jest zabroniona i karana dyskwalifikacją.
Wykorzystywanie błędów gry (Exploits): Świadome wykorzystywanie błędów gry (np. wchodzenie pod tekstury) jest zabronione.
Zachowanie: Wymagana jest kultura osobista i szacunek do przeciwników, organizatorów oraz widzów. Wszelkie przejawy toksyczności, rasizmu czy mowy nienawiści będą karane.

VI. Drużyny i Gracze
Drużyna składa się z 4 graczy (SQUAD). Dopuszcza się posiadanie jednego (1) gracza rezerwowego.
Kapitan drużyny jest odpowiedzialny za kontakt z administracją.
Gracze zobowiązani są do używania w grze nicków (IGN) zgłoszonych podczas rejestracji.

VII. Procedura Meczowa
Wszystkie drużyny mają obowiązek przebywać na serwerze Discord PUBG POLSKA i korzystać z dedykowanych im kanałów głosowych podczas trwania wszystkich meczów.
Dane do logowania na serwer (Nazwa lobby + Hasło) będą przekazywane kapitanom drużyn na dedykowanym kanale Discord na 15 minut przed startem pierwszej gry.
Drużyny mają obowiązek stawić się w lobby na czas.
Rozłączenia (Disconnects):
W przypadku rozłączenia pojedynczego gracza (DC) gra jest kontynuowana. Gracz może próbować dołączyć ponownie.
Organizator nie przewiduje restartu lobby z powodu problemów technicznych pojedynczych graczy.
Restart meczu może nastąpić tylko w przypadku krytycznego błędu serwera (np. rozłączenie ponad 25% graczy) i tylko po decyzji głównego administratora.

VIII. Transmisja
Oficjalna transmisja z komentarzem odbędzie się na kanale twitch.tv/akerman88. Transmisja będzie posiadała odpowiednie opóźnienie (delay) w celu uniknięcia "stream-snipingu".
Gracze mogą streamować swoją grę (POV), jednak zaleca się ustawienie własnego opóźnienia transmisji (minimum 5 minut) dla własnego bezpieczeństwa taktycznego. Organizator nie ponosi odpowiedzialności za "stream-sniping" wynikający z braku opóźnienia na prywatnych transmisjach.

IX. Postanowienia Końcowe
Administracja turnieju (PUBG POLSKA) ma pełne prawo do podejmowania ostatecznych decyzji we wszystkich sprawach spornych.
Organizator zastrzega sobie prawo do zmiany niniejszego regulaminu w dowolnym momencie, jeśli uzna to za konieczne dla zapewnienia uczciwej i płynnej rozgrywki.
Zapisanie się do turnieju jest równoznaczne z akceptacją wszystkich punktów niniejszego regulaminu.
</pre>
                </div>
            </section>

            <section class="content-section sponsor-image-section">
                <img src="https://i.imgur.com/HcTRskR.png" alt="Sponsor Turnieju 2">
            </section>

        </main>

        <footer>
            <p>&copy; 2025 PUBG POLSKA. Wszelkie prawa zastrzeżone. Strona nie jest powiązana z KRAFTON, Inc.</p>
        </footer>

    </div>

    <script>

        // =============================================
        // CZĘŚĆ 1: LOGIKA POBIERANIA LISTY DRUŻYN
        // =============================================

        function cleanText(text) {
            if (!text) return null;
            return text.trim().replace(/^"|"$/g, '');
        }

        function parseCSVRow(row) {
            const columns = [];
            let currentColumn = '';
            let inQuotes = false;
            for (let i = 0; i < row.length; i++) {
                const char = row[i];
                if (char === '"') {
                    if (inQuotes && row[i+1] === '"') {
                        currentColumn += '"'; i++;
                    } else { inQuotes = !inQuotes; }
                } else if (char === ',' && !inQuotes) {
                    columns.push(currentColumn); currentColumn = '';
                } else { currentColumn += char; }
            }
            columns.push(currentColumn);
            return columns;
        }

        async function pobierzListeDruzyn() {
            const csvUrl = '/api/druzyny'; // Pyta nasz backend
            const listaElement = document.getElementById('team-list-dynamic');
            try {
                const response = await fetch(csvUrl, { cache: 'no-store' });
                if (!response.ok) { throw new Error(`Błąd serwera. Status: ${response.status}`); }

                const jsonData = await response.json();
                if (jsonData.error) { throw new Error(jsonData.error); }

                const dataCsv = jsonData.data;
                const wiersze = dataCsv.split(/\r?\n/);
                listaElement.innerHTML = '';
                let teamCount = 0;

                for (let i = 1; i < wiersze.length; i++) {
                    const wiersz = wiersze[i].trim();
                    if (!wiersz) continue;
                    const kolumny = parseCSVRow(wiersz);
                    const nazwaDrużyny = cleanText(kolumny[1]);
                    if (nazwaDrużyny) {
                        teamCount++;
                        const kapitan = cleanText(kolumny[3]);
                        const gracz2 = cleanText(kolumny[5]);
                        const gracz3 = cleanText(kolumny[7]);
                        const gracz4 = cleanText(kolumny[9]);
                        const rezerwa = cleanText(kolumny[11]);

                        const teamCard = document.createElement('div');
                        teamCard.className = 'team-card';

                        let htmlWewnatrz = `<div class="team-card-header">
                                                <span class="team-number">${teamCount}.</span>
                                                <span class="team-name">${nazwaDrużyny}</span>
                                            </div>
                                            <ul class="player-sublist">`;

                        // Link do op.gg/pubg

                        if (kapitan) htmlWewnatrz += `<li class="captain"><a href="https://op.gg/pubg/player/${kapitan}" target="_blank" rel="noopener noreferrer">${kapitan}</a> (Kapitan)</li>`;
                        if (gracz2) htmlWewnatrz += `<li><a href="https://op.gg/pubg/player/${gracz2}" target="_blank" rel="noopener noreferrer">${gracz2}</a></li>`;
                        if (gracz3) htmlWewnatrz += `<li><a href="https://op.gg/pubg/player/${gracz3}" target="_blank" rel="noopener noreferrer">${gracz3}</a></li>`;
                        if (gracz4) htmlWewnatrz += `<li><a href="https://op.gg/pubg/player/${gracz4}" target="_blank" rel="noopener noreferrer">${gracz4}</a></li>`;
                        if (rezerwa) htmlWewnatrz += `<li class="sub-player"><a href="https://op.gg/pubg/player/${rezerwa}" target="_blank" rel="noopener noreferrer">${rezerwa}</a> (Gracz 5)</li>`;

                        htmlWewnatrz += `</ul>`;
                        teamCard.innerHTML = htmlWewnatrz;
                        listaElement.appendChild(teamCard);
                    }
                }
                if (teamCount === 0) { listaElement.innerHTML = '<p>Brak zapisanych drużyn. Bądź pierwszy!</p>'; }
            } catch (error) {
                console.error('Błąd podczas ładowania listy drużyn:', error);
                listaElement.innerHTML = `<p>Nie udało się załadować listy drużyn. Błąd: ${error.message}</p>`;
            }
        }


        // ===============================================================
        // CZĘŚĆ 2: LOGIKA DLA WYNIKÓW MECZÓW (PUBG API)
        // ===============================================================

        /*
           !!! TUTAJ MUSISZ WPISAĆ ID MECZÓW PO ICH ZAKOŃCZENIU !!!
        */
        const MATCH_IDS = {
            "gra1": "TUTAJ_WKLEJ_ID_MECZU_DLA_GRY_1", // To jest ID testowe
            "gra2": "TUTAJ_WKLEJ_ID_MECZU_DLA_GRY_2",
            "gra3": "TUTAJ_WKLEJ_ID_MECZU_DLA_GRY_3",
            "gra4": "TUTAJ_WKLEJ_ID_MECZU_DLA_GRY_4",
            "gra5": "TUTAJ_WKLEJ_ID_MECZU_DLA_GRY_5",
            "gra6": "TUTAJ_WKLEJ_ID_MECZU_DLA_GRY_6",
            "generalna": null // Zakładka generalna (na razie pusta)
        };

        // Globalna pamięć podręczna (cache) na wyniki
        const matchDataCache = {};

        /**
         * Funkcja wypełniająca tabelę wyników danymi z API
         */
        function populateTable(tabId, data) {
            const tabContent = document.getElementById(tabId);
            if (!tabContent) return;

            const tableBody = tabContent.querySelector('.results-table tbody');
            if (!tableBody) return;

            tableBody.innerHTML = ''; // Wyczyść tabelę

            data.forEach(team => {
                const row = `
                    <tr>
                        <td>${team.rank}</td>
                        <td>${team.team_name}</td>
                        <td>${team.placement_points}</td>
                        <td>${team.kills}</td>
                        <td>${team.total_points}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        /**
         * Funkcja-wrapper do pobierania danych, używająca cache
         */
         async function getMatchData(matchId) {
            if (matchDataCache[matchId]) {
                return matchDataCache[matchId]; // Zwróć dane z cache, jeśli je mamy
            }

            // Jeśli nie ma w cache, pobierz z serwera
            const response = await fetch(`/api/wyniki/${matchId}`);
            if (!response.ok) {
                throw new Error(`Błąd serwera: ${response.statusText}`);
            }
            const data = await response.json();
            if (data.error) {
                throw new Error(data.error);
            }

            matchDataCache[matchId] = data; // Zapisz dane w cache
            return data;
        }


        /**
         * Funkcja pobierająca dane JEDNEGO meczu i wstawiająca do tabeli
         */
        async function fetchMatchResults(tabId, matchId) {
            const tabContent = document.getElementById(tabId);
            const tableBody = tabContent.querySelector('.results-table tbody');

            if (tableBody) {
                tableBody.innerHTML = '<tr><td colspan="5">Ładowanie wyników...</td></tr>';
            }

            try {
                const data = await getMatchData(matchId); // Użyj funkcji z cache
                populateTable(tabId, data);
                tabContent.dataset.loaded = "true";

            } catch (error) {
                console.error(`Błąd pobierania wyników dla ${matchId}:`, error);
                if (tableBody) {
                    tableBody.innerHTML = `<tr><td colspan="5">Nie udało się załadować wyników. Błąd: ${error.message}</td></tr>`;
                }
            }
        }

        /**
         * Funkcja do liczenia klasyfikacji generalnej
         */
        async function calculateAndShowGeneralClassification() {
            const tabId = "tab-generalna";
            const tabContent = document.getElementById(tabId);
            const tableBody = tabContent.querySelector('.results-table tbody');

            if (!tableBody) return;

            tableBody.innerHTML = '<tr><td colspan="5">Pobieranie i sumowanie wyników...</td></tr>';

            try {
                // 1. Stwórz listę wszystkich ID meczów, które mają być policzone
                const matchIdsToFetch = Object.values(MATCH_IDS)
                    .filter(id => id && !id.startsWith("TUTAJ_")); // Bierzemy tylko realne ID

                if (matchIdsToFetch.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="5">Brak wyników do wyświetlenia.</td></tr>';
                    return;
                }

                // 2. Pobierz wszystkie wyniki równolegle
                const allMatchesResults = await Promise.all(
                    matchIdsToFetch.map(id => getMatchData(id))
                );

                // 3. Sumuj wyniki
                const teamStats = {}; // Obiekt do przechowywania sum

                allMatchesResults.forEach(matchData => {
                    matchData.forEach(team => {
                        const teamName = team.team_name; // Używamy nicku lidera jako ID teamu
                        if (!teamStats[teamName]) {
                            // Stwórz wpis dla drużyny, jeśli jeszcze nie istnieje
                            teamStats[teamName] = {
                                team_name: teamName,
                                placement_points: 0,
                                kills: 0,
                                total_points: 0
                            };
                        }
                        // Dodaj punkty
                        teamStats[teamName].placement_points += team.placement_points;
                        teamStats[teamName].kills += team.kills;
                        teamStats[teamName].total_points += team.total_points;
                    });
                });

                // 4. Konwertuj obiekt z powrotem na listę
                const generalRankingList = Object.values(teamStats);

                // 5. Posortuj listę generalną (poprawiona składnia JavaScript)
                generalRankingList.sort((teamA, teamB) => {
                    if (teamA.total_points > teamB.total_points) return -1;
                    if (teamA.total_points < teamB.total_points) return 1;
                    if (teamA.kills > teamB.kills) return -1;
                    if (teamA.kills < teamB.kills) return 1;
                    return 0;
                });

                // 6. Nadaj finalne rangi (miejsca)
                const finalList = generalRankingList.map((team, index) => ({
                    ...team,
                    rank: index + 1 // Nadaj miejsce 1, 2, 3...
                }));

                // 7. Wypełnij tabelę
                populateTable(tabId, finalList);
                tabContent.dataset.loaded = "true";

            } catch (error) {
                console.error('Błąd podczas liczenia klasyfikacji generalnej:', error);
                tableBody.innerHTML = `<tr><td colspan="5">Nie udało się policzyć klasyfikacji. Błąd: ${error.message}</td></tr>`;
            }
        }


        // =============================================
        // CZĘŚĆ 3: GŁÓWNY KOD URUCHAMIAJĄCY
        // =============================================

        document.addEventListener('DOMContentLoaded', () => {

            // 1. Uruchom ładowanie listy teamów
            pobierzListeDruzyn();

            // 2. Logika zakładek wyników
            const tabsNav = document.querySelector('.tabs-nav');
            const tabContents = document.querySelectorAll('.tab-content');

            if (tabsNav) {
                tabsNav.addEventListener('click', (e) => {
                    const clickedTab = e.target.closest('.tab-link');
                    if (!clickedTab) return;

                    const tabKey = clickedTab.dataset.tab; // np. "gra1" lub "generalna"
                    const targetContentId = 'tab-' + tabKey; // np. "tab-gra1"
                    const targetContent = document.getElementById(targetContentId);

                    // Przełączanie zakładek
                    document.querySelectorAll('.tab-link').forEach(link => link.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    clickedTab.classList.add('active');
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }

                    // --- ZMIENIONA LOGIKA POBIERANIA ---
                    const matchId = MATCH_IDS[tabKey];
                    const isLoadingOrLoaded = targetContent.dataset.loaded === "true" || targetContent.dataset.loading === "true";

                    if (isLoadingOrLoaded) return;

                    targetContent.dataset.loading = "true";

                    if (tabKey === 'generalna') {
                        calculateAndShowGeneralClassification().finally(() => {
                            targetContent.dataset.loading = "false";
                        });
                    } else if (matchId && !matchId.startsWith("TUTAJ_")) {
                        fetchMatchResults(targetContentId, matchId).finally(() => {
                            targetContent.dataset.loading = "false";
                        });
                    } else {
                        // Jeśli ID meczu nie jest ustawione, po prostu usuń "loading"
                        targetContent.dataset.loading = "false";
                    }
                });
            }

            // =============================================
            // NOWA LOGIKA - Rozwijanie listy graczy
            // =============================================
            const teamListContainer = document.getElementById('team-list-dynamic');

            if (teamListContainer) {
                teamListContainer.addEventListener('click', (e) => {
                    // Znajdź nagłówek, który został kliknięty
                    const header = e.target.closest('.team-card-header');

                    // Jeśli kliknięto poza nagłówkiem, nie rób nic
                    if (!header) return;

                    // Znajdź listę graczy, która jest *następnym rodzeństwem* nagłówka
                    const playerList = header.nextElementSibling;

                    // Jeśli to jest lista graczy, przełącz jej klasę 'expanded'
                    if (playerList && playerList.classList.contains('player-sublist')) {
                        playerList.classList.toggle('expanded');
                    }
                });
            }
            // =============================================
        });
    </script>

</body>
</html>